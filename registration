<!-- Include the Google Sign-In script -->
<script src="https://apis.google.com/js/platform.js" async defer></script>

<!-- Add a button for Google Login -->
<div class="g-signin2" data-onsuccess="onSignIn"></div>

<script>
  // Called when Google Sign-In succeeds
  function onSignIn(googleUser) {
    // Send the ID token to your backend for verification
    var id_token = googleUser.getAuthResponse().id_token;
    
    // Make an API request to your backend to authenticate the user
    fetch('/google-auth', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ idToken: id_token })
    })
    .then(response => response.json())
    .then(data => {
      // Handle the response from your backend
      if (data.success) {
        // Redirect the user to the appropriate page
        window.location.href = '/dashboard';
      } else {
        // Show an error message
        console.error('Login failed:', data.error);
      }
    });
  }
</script>

